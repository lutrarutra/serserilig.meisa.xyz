{{template "base" .}}

{{define "content"}}

    <div class="container">
        <div class="row">
            <div class="driver-standings col" id="driver-standings-div">
                <table class="table table-dark table-striped align-middle">
                    <thead>
                    <tr>
                        <th scope="col">Pos.</th>
                        <th scope="col"></th>
                        <th scope="col"></th>
                        <th scope="col" style="text-align: left">Driver</th>
                        <th scope="col">Points</th>
                    </tr>
                    </thead>
                    <tbody id="driver-standings">
                    </tbody>
                </table>
            </div>

            <div class="team-standings col" id="team-standings-div">
                <table class="table table-dark table-striped align-middle">
                    <thead>
                    <tr>
                        <th scope="col">Pos.</th>
                        <th scope="col"></th>
                        <th scope="col"></th>
                        <th scope="col" style="text-align: left">Team</th>
                        <th scope="col">Points</th>
                    </tr>
                    </thead>
                    <tbody id="team-standings">
                    </tbody>
                </table>
            </div>
        </div>
    </div>

{{end}}

{{define "css"}}

    <style>
        table img {
            height: 36px;
        }

        table {
            width: 50%
        }

        .driver-pos {
            width: 5%
        }
        .driver-team-logo {
            width: 5%
        }
        .driver-name {
            text-align: left;
        }
        .driver-points {
            width: 10%
        }

        .team-pos {
            width: 5%
        }
        .team-logo {
            width: 5%
        }
        .team-name {
            text-align: left;
        }
        .team-points {
            width: 10%
        }

        /*.driver-standings {*/
        /*    border-right: 1px solid lightgray;*/
        /*}*/
        /*.team-standings {*/
        /*    border-left: 1px solid lightgray;*/
        /*}*/

        .driver-team-color {
            width: 3px
        }
        .team-color {
            width: 3px
        }

    </style>

{{end}}


{{define "js"}}

    <script src="/static/js/public/standings.js"></script>

    <script>
        activateNav('nav-standings')

        const is_mobile = window.matchMedia("only screen and (max-width: 768px)").matches

        const teams = JSON.parse({{index .StringMap "teams"}})
        const teams_by_id = {}
        for (const index in teams) {
            const team = teams[index]
            teams_by_id[team['id'].toString()] = team
        }

        const drivers = JSON.parse({{index .StringMap "drivers"}})

        for (const team_name in teams) {
            const team = teams[team_name]
            for (const index in team["driverIDs"]) {
                const driver_id = team["driverIDs"][index]
                drivers[driver_id]["team"] = team_name
                drivers[driver_id]["team_abr"] = team['abr']
            }
        }
        
        buildDriverStandings()
        buildTeamStandings()

        if (!(is_mobile)) {
            const border_style = '1px solid lightgray'
            document.getElementById('driver-standings-div').style.borderRight = border_style
            document.getElementById('team-standings-div').style.borderLeft = border_style
        }
    </script>

{{end}}